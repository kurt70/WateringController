services:
  mqtt:
    image: eclipse-mosquitto:2
    ports:
      - "1883:1883"
      - "9001:9001"
    volumes:
      - ./mosquitto/mosquitto.conf:/mosquitto/config/mosquitto.conf:ro

  aspire-dashboard:
    image: mcr.microsoft.com/dotnet/aspire-dashboard:latest
    ports:
      - "18888:18888"
      - "4317:18889"
      - "4318:18890"
    environment:
      - DOTNET_DASHBOARD_UNSECURED_ALLOW_ANONYMOUS=true

  # otel-collector-azure:
  #   image: otel/opentelemetry-collector-contrib:0.111.0
  #   command: ["--config=/etc/otelcol/config.yaml"]
  #   environment:
  #     - APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=...
  #   volumes:
  #     - ./otel-collector-config.azure.yaml:/etc/otelcol/config.yaml:ro
  #   ports:
  #     - "4317:4317"
  #     - "4318:4318"

  # app:
  #   build:
  #     context: ..
  #     dockerfile: src/Dockerfile
  #   ports:
  #     - "8080:8080"
  #   environment:
  #     - Mqtt__Host=mqtt
  #     - Mqtt__Port=1883
  #     - Mqtt__TopicPrefix=home/veranda
  #     - WATERING_DB_PATH=/data/watering.db
  #   volumes:
  #     - ./data:/data
